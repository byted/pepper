<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Pepper: Customizing the mapping</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Pepper
   &#160;<span id="projectnumber">3.0.1-SNAPSHOT</span>
   </div>
   <div id="projectbrief">A highly extensible plattform for conversion and manipulationoflinguisticdatabetweenanunboundsetofformats.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('customization.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Customizing the mapping </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>When creating a mapping, it is often a matter of choice to map some data this way or another. In such cases it might be clever not to be that strict and allow only one possibility. It could be beneficially to leave this decision to the user. Customizing a mapping will increase the power of a Pepper module enormously, since it can be used for a wider range of purposes without rewriting parts of it. The Pepper framework provides a property system to access such user customizations. Nevertheless, a Pepper module shall not be dependent on user customization. The past showed, that it is very frustrating for a user, when a Pepper module breaks up, because of not specified properties. You should always define a default behavior in case that the user has not specified a property.</p>
<h2>Property </h2>
<p>A property is just an attribute-value pair, consisting of a name called <em>property name</em> and a value called <em>property value</em>. Properties can be used for customizing the behavior of a mapping. Such a property must be specified by the user and determined in the Pepper workflow. The Pepper framework will pass all customization properties directly to the instance of the Pepper module.</p>
<p>A customization property in Pepper is represented by an object of type org.corpus_tools.pepper.modules.PepperModuleProperty. Such an object consists of the property's name, its datatype, a short description and a flag specifying whether this property is optional or mandatory as shown in the following snippet: </p>
<div class="fragment"><div class="line">PepperModuleProperty(String name, Class&lt;T&gt; clazz, String description, </div>
<div class="line">                     Boolean required)</div>
</div><!-- fragment --><p> Even a default value could be passed: </p>
<div class="fragment"><div class="line">PepperModuleProperty(String name, Class&lt;T&gt; clazz, String description,</div>
<div class="line">                     T defaultValue, Boolean required)                </div>
</div><!-- fragment --><p> To register a customization property, you need to add the created object to the registry, which is managed and accessed by the Pepper framework. The registry is realized via a specified org.corpus_tools.pepper.modules.PepperModuleProperty object. To create such an object, first implement a registry class as shown in the following snippet: </p>
<div class="fragment"><div class="line"><span class="comment">//...</span></div>
<div class="line"><span class="keyword">import</span> org.corpus_tools.pepper.modules.PepperModuleProperties;</div>
<div class="line"><span class="keyword">import</span> org.corpus_tools.pepper.modules.PepperModuleProperty;</div>
<div class="line"><span class="comment">//...</span></div>
<div class="line"><span class="keyword">public</span> <span class="keyword">class </span>MyModuleProperties <span class="keyword">extends</span> PepperModuleProperties {</div>
<div class="line">    <span class="comment">//...            </span></div>
<div class="line">    <span class="keyword">public</span> MyModuleProperties(){  </div>
<div class="line">       <span class="comment">//...</span></div>
<div class="line">       <span class="comment">//1: adding a customization property to registry</span></div>
<div class="line">       this.addProperty(<span class="keyword">new</span> PepperModuleProperty&lt;String&gt;</div>
<div class="line">           (<span class="stringliteral">&quot;MyProp&quot;</span>, String.class, <span class="stringliteral">&quot;description of MyProp&quot;</span>, <span class="keyword">true</span>));</div>
<div class="line">       <span class="comment">//...</span></div>
<div class="line">    }</div>
<div class="line">    <span class="comment">//2: return value of customization property</span></div>
<div class="line">    <span class="keyword">public</span> String getMyProp(){</div>
<div class="line">        <span class="keywordflow">return</span>((String)this.getProperty(<span class="stringliteral">&quot;MyProp&quot;</span>).getValue());</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="comment">//3: check constraints on customization property </span></div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">boolean</span> checkProperty(PepperModuleProperty&lt;?&gt; prop){</div>
<div class="line">   <span class="comment">//calls the check of constraints in parent, </span></div>
<div class="line">   <span class="comment">//for instance if a required value is set</span></div>
<div class="line">   super.checkProperty(prop);</div>
<div class="line">   <span class="keywordflow">if</span> (<span class="stringliteral">&quot;myProp&quot;</span>.equals(prop.getName())){</div>
<div class="line">        File file= (File)prop.getValue();</div>
<div class="line">        <span class="comment">//throws an exception, in case that the file does not exist</span></div>
<div class="line">        <span class="keywordflow">if</span> (!file.exists()){</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> PepperModuleException(<span class="stringliteral">&quot;The file &quot;</span>+</div>
<div class="line">            <span class="stringliteral">&quot;set to property &#39;myProp&#39; does not exist.&quot;</span>);</div>
<div class="line">        }</div>
<div class="line">   }</div>
<div class="line">   <span class="keywordflow">return</span>(<span class="keyword">true</span>);</div>
<div class="line">}</div>
</div><!-- fragment --><p>The snippet shows on position 1 how to create, specify and register a org.corpus_tools.pepper.modules.PepperModuleProperty. The method 'getMyProp()' on position 2 shows the creation of a specialized method to access the property. Such a getter-method would be very helpful to have a simplified access without casting values inside your mapping code. Position 3 shows the method 'checkProperty()', which can be used to check the passed property's value. Since customization properties or more specific their values are entered manually by the user, it might be necessary to check the passed values. The Pepper framework calls this method before the mapping process is started. If a constraint fails the user will be informed immediately.</p>
<p>Last but not least, you need to initialize your property object. The best place for doing this is the constructor of your module. Such an early initialization ensures, that the Pepper framework will use the correct object and will not create a generic <a class="el" href="classorg_1_1corpus__tools_1_1pepper_1_1modules_1_1_pepper_module_properties.html">org.corpus_tools.pepper.modules.PepperModuleProperties</a> object. Initialize your property object via calling: </p>
<div class="fragment"><div class="line">this.setProperties(<span class="keyword">new</span> MyModuleProperties());</div>
</div><!-- fragment --><p> You can access the <a class="el" href="classorg_1_1corpus__tools_1_1pepper_1_1modules_1_1_pepper_module_properties.html">org.corpus_tools.pepper.modules.PepperModuleProperties</a> object at all places in your <a class="el" href="interfaceorg_1_1corpus__tools_1_1pepper_1_1modules_1_1_pepper_module.html">org.corpus_tools.pepper.modules.PepperModule</a> object or your <a class="el" href="interfaceorg_1_1corpus__tools_1_1pepper_1_1modules_1_1_pepper_mapper.html">org.corpus_tools.pepper.modules.PepperMapper</a> object. The following snippet shows how: </p>
<div class="fragment"><div class="line">getProperty(String propName);</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="module_developers.html">Pepper module developers</a></li>
    <li class="footer">Generated on Sun Apr 3 2016 22:32:51 for Pepper by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
